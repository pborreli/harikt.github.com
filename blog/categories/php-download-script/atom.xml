<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Php Download Script | Random thoughts | Hari KT]]></title>
  <link href="http://harikt.com/blog/categories/php-download-script/atom.xml" rel="self"/>
  <link href="http://harikt.com/"/>
  <updated>2014-05-13T11:06:51+05:30</updated>
  <id>http://harikt.com/</id>
  <author>
    <name><![CDATA[Hari K T]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Downloading a File]]></title>
    <link href="http://harikt.com/blog/2009/02/01/7-downloading-a-file/"/>
    <updated>2009-02-01T08:24:00+05:30</updated>
    <id>http://harikt.com/blog/2009/02/01/7-downloading-a-file</id>
    <content type="html"><![CDATA[<p>{syntaxhighlighter class=&ldquo;php&rdquo;} 404 File not found!&ldquo;); } //Gather relevent info about file $len = filesize($file); $filename = basename($file); $file_extension = strtolower(substr(strrchr($filename, &rdquo;.&ldquo;), 1)); //This will set the Content-Type to the appropriate setting for the file switch ($file_extension) { case "pdf&rdquo;: $ctype = &ldquo;application/pdf&rdquo;; break; case &ldquo;exe&rdquo;: $ctype = &ldquo;application/octet-stream&rdquo;; break; case &ldquo;zip&rdquo;: $ctype = &ldquo;application/zip&rdquo;; break; case &ldquo;doc&rdquo;: $ctype = &ldquo;application/msword&rdquo;; break; case &ldquo;xls&rdquo;: $ctype = &ldquo;application/vnd.ms-excel&rdquo;; break; case &ldquo;ppt&rdquo;: $ctype = &ldquo;application/vnd.ms-powerpoint&rdquo;; break; case &ldquo;gif&rdquo;: $ctype = &ldquo;image/gif&rdquo;; break; case &ldquo;png&rdquo;: $ctype = &ldquo;image/png&rdquo;; break; case &ldquo;jpeg&rdquo;: case &ldquo;jpg&rdquo;: $ctype = &ldquo;image/jpg&rdquo;; break; case &ldquo;mp3&rdquo;: $ctype = &ldquo;audio/mpeg&rdquo;; break; case &ldquo;wav&rdquo;: $ctype = &ldquo;audio/x-wav&rdquo;; break; case &ldquo;mpeg&rdquo;: case &ldquo;mpg&rdquo;: case &ldquo;mpe&rdquo;: $ctype = &ldquo;video/mpeg&rdquo;; break; case &ldquo;mov&rdquo;: $ctype = &ldquo;video/quicktime&rdquo;; break; case &ldquo;avi&rdquo;: $ctype = &ldquo;video/x-msvideo&rdquo;; break; //The following are for extensions that shouldn&rsquo;t be downloaded (sensitive stuff, like php files) case &ldquo;php&rdquo;: case &ldquo;htm&rdquo;: case &ldquo;html&rdquo;: case &ldquo;txt&rdquo;: die(&ldquo;<strong>Cannot be used for &rdquo; . $file_extension . &ldquo; files!</strong>&rdquo;); break; default: $ctype = &ldquo;application/force-download&rdquo;; } //Begin writing headers header(&ldquo;Pragma: public&rdquo;); header(&ldquo;Expires: 0&rdquo;); header(&ldquo;Cache-Control: must-revalidate, post-check=0, pre-check=0&rdquo;); header(&ldquo;Cache-Control: public&rdquo;); header(&ldquo;Content-Description: File Transfer&rdquo;); //Use the switch-generated Content-Type header(&ldquo;Content-Type: $ctype&rdquo;); //Force the download $header = &ldquo;Content-Disposition: attachment; filename=&rdquo; . $filename . &ldquo;;&rdquo;; header($header); header(&ldquo;Content-Transfer-Encoding: binary&rdquo;); header(&ldquo;Content-Length: &rdquo; . $len); @readfile($file); exit; } } {/syntaxhighlighter} Create an object of this class and call the method dl_file. {syntaxhighlighter class=&ldquo;php&rdquo;} $dwnldObj = new Download(); $dwnldObj->dl_file(&ldquo;full path of the file in server&rdquo;); {/syntaxhighlighter} Note : Give the complete path of file . Else it may cause errors.</p>
]]></content>
  </entry>
  
</feed>
