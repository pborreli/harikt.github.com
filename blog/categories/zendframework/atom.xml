<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Zendframework | Random thoughts | Hari KT]]></title>
  <link href="http://harikt.com/blog/categories/zendframework/atom.xml" rel="self"/>
  <link href="http://harikt.com/"/>
  <updated>2014-05-29T10:15:07+05:30</updated>
  <id>http://harikt.com/</id>
  <author>
    <name><![CDATA[Hari K T]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Magento and REST Api]]></title>
    <link href="http://harikt.com/blog/2013/07/05/magento-and-rest-api/"/>
    <updated>2013-07-05T08:31:00+05:30</updated>
    <id>http://harikt.com/blog/2013/07/05/magento-and-rest-api</id>
    <content type="html"><![CDATA[<p>Magento provides both REST and SOAP api. In this post I would like to
concentrate on REST api to connect and get the products from magento shop.</p>

<p>First we want to register an Oauth consumer to get the consumer key and secret key.</p>

<p>Login to the admin of the magento shop and from the menu
<code>System-&gt;Web Services-&gt;REST - Oauth Consumers</code> and add a new Ouath consumer.</p>

<p><img src="http://harikt.com/images/oauth-consumer.png" alt="REST - Oauth Consumers" /></p>

<p>You need the Key and Secret which is what we pass in the config to
<code>Zend_Oauth_Consumer</code> shortly.</p>

<p>Let us also assign the right permissions for the attributes. From the menu
<code>System-&gt;Web Services-&gt;REST - Attributes</code> click on Admin and assign the right
permission. In our case we give access to products.</p>

<p><img src="http://harikt.com/images/magento_rest_attributes.png" alt="REST - Attributes" /></p>

<p>Now it is time to show you some code. In most case, we would have defined a
named route, and depeding upon your route in zend framework call the url.</p>

<p>Assuming the default url <code>http://localhost:8000/index/index</code> and accessing
this in your browser will redirect you to the magento shop and get the access token after
you authenticating and allowing it.</p>

<p>Note : Make sure that the domain you have logged in and the one
you have provided in the callback url of magento REST Oauth consumer are
same. Else you will find hard time debugging why session is lost.
(I am talking about the difference in <a href="http://www.example.com">http://www.example.com</a> and <a href="http://example.com">http://example.com</a>)</p>

<p>You want to change the below parameters in the controller according to yours.</p>

<p><code>$this-&gt;hostname</code>: The magento shop</p>

<p><code>$consumerKey</code>: The key you got when creating the oauth consumer</p>

<p><code>$consumerSecret</code>: The secret key you got when creating the oauth consumer</p>

<p><code>$callbackUrl</code>: The url where it will be redirected to get the accesstoken,
same as the one you have provided when creating the oauth consumer.</p>

<h2>Source Code</h2>

<p>```php
&lt;?php
class IndexController extends Zend_Controller_Action
{</p>

<pre><code>public function init()
{
    $this-&gt;hostname = 'the-magento-host';
    $consumerKey = '';
    $consumerSecret = '';
    $callbackUrl = 'callback-url';
    $this-&gt;config = array(
        'callbackUrl' =&gt; $callbackUrl,
        'requestTokenUrl' =&gt; $this-&gt;hostname . '/oauth/initiate',
        'siteUrl' =&gt; $this-&gt;hostname . '/oauth',
        'consumerKey' =&gt; $consumerKey,
        'consumerSecret' =&gt; $consumerSecret,
        'authorizeUrl' =&gt; $this-&gt;hostname . '/admin/oauth_authorize',
        // 'authorizeUrl' =&gt; $this-&gt;hostname . '/oauth/authorize',
        'accessTokenUrl' =&gt; $this-&gt;hostname . '/oauth/token'
    );
}

public function indexAction()
{        
    $accesssession = new Zend_Session_Namespace('AccessToken');
    if (isset($accesssession-&gt;accessToken)) {
        $token = unserialize($accesssession-&gt;accessToken);            
        // $client = $token-&gt;getHttpClient($this-&gt;config);
        $client = new Zend_Http_Client();
        $adapter = new Zend_Http_Client_Adapter_Curl();
        $client-&gt;setAdapter($adapter);
        $adapter-&gt;setConfig(array(
            'adapter'   =&gt; 'Zend_Http_Client_Adapter_Curl',
            'curloptions' =&gt; array(CURLOPT_FOLLOWLOCATION =&gt; true),
        ));
        $client-&gt;setUri($this-&gt;hostname . '/api/rest/products');
        $client-&gt;setParameterGet('oauth_token', $token-&gt;getToken());
        $client-&gt;setParameterGet('oauth_token_secret', $token-&gt;getTokenSecret());
        $response = $client-&gt;request('GET');
        $products = Zend_Json::decode($response-&gt;getBody());
    } else {
        $consumer = new Zend_Oauth_Consumer($this-&gt;config);
        $token = $consumer-&gt;getRequestToken();
        $requestsession = new Zend_Session_Namespace('RequestToken');
        $requestsession-&gt;requestToken = serialize($token);
        $consumer-&gt;redirect();
    }
    $this-&gt;view-&gt;products = $products;
}

public function callbackAction()
{
    $requestsession = new Zend_Session_Namespace('RequestToken');
    if (!empty($_GET) &amp;&amp; isset($requestsession-&gt;requestToken)) {
        $accesssession = new Zend_Session_Namespace('AccessToken');
        $consumer = new Zend_Oauth_Consumer($this-&gt;config);
        $token = $consumer-&gt;getAccessToken(
            $_GET,
            unserialize($requestsession-&gt;requestToken)
        );
        $accesssession-&gt;accessToken = serialize($token);
        // Now that we have an Access Token, we can discard the Request Token
        unset($requestsession-&gt;requestToken);
        // $this-&gt;_redirect();
        $this-&gt;_forward('index', 'index', 'default');
    } else {
        // Mistaken request? Some malfeasant trying something?
        throw new Exception('Invalid callback request. Oops. Sorry.');
    }
}

public function callbackrejectedAction()
{
    // rejected
}
</code></pre>

<p>}
```</p>

<p>Normally you can get the http client by <code>$token-&gt;getHttpClient($this-&gt;config)</code>
rather than creating <code>Zend_Http_Client</code> as I did. But due to some issues
the request was getting <code>Service Temporarily Unavailable</code> as response.</p>

<p>The <code>Service Temporarily Unavailable</code> can also be due to permission issues.
You should also check whether you have given the right permissions for
roles and resources.</p>

<p>In most case, we would have defined a named route, so you could use the
url helpers to generate the route. I hope this helps you to move with REST
and Magento</p>

<h2>Resources</h2>

<p><a href="http://www.magentocommerce.com/api/rest/introduction.html">Magento REST API</a></p>

<p><a href="http://framework.zend.com/manual/1.12/en/zend.oauth.introduction.html">zend oauth introduction</a></p>

<h2>Thanks</h2>

<p>I would like to thank <a href="http://phpcloud.com">PHP Cloud</a> for providing the
free service to deploy the magento shop and test it. Installing and deploying app was super
simple. So if you have not tried it is time for it.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Is There a Design Flaw for the Components or Packages Made by Symfony2 and Zend Framework 2]]></title>
    <link href="http://harikt.com/blog/2012/03/09/any-design-flaw-for-components-packages-for-symfony2-zf2/"/>
    <updated>2012-03-09T04:29:00+05:30</updated>
    <id>http://harikt.com/blog/2012/03/09/any-design-flaw-for-components-packages-for-symfony2-zf2</id>
    <content type="html"><![CDATA[<p>UPDATE 30-03-2012: Fabien Potencier made the necessary <a href="http://harikt.com/comment/510#comment-510">changes to move the tests</a> to each components source folder. <a href="https://github.com/symfony/symfony/commit/fea6b79acdf01b79ac3d3206c001a9dec662da93">See commit</a> . That&rsquo;s a great move from Symfony&rsquo;s part . But what will happen to at Zend Framework?  The most awesome discussion that is happening in PHP world is recognizing the importance of <a href="http://philsturgeon.co.uk/blog/2012/03/packages-the-way-forward-for-php">Components or Packages</a>. Bernhard Schussek even wrote a post on <a href="http://webmozarts.com/2012/03/06/symfony2-form-architecture/">Symfony2 Form Architecture</a> and I wrote my thoughts and understanding on <a href="http://harikt.com/standalone-form-component-for-php">Standalone Form component for PHP</a>.  I would like to share the image of the low level architecture of the Symfony2 Form component from his post, uploaded to flickr for his bandwidth will not have any trouble.  <a href="http://www.flickr.com/photos/harikt/6819330426/" title="class-diagram2 by K T Hari, on Flickr"><img src="http://farm8.staticflickr.com/7202/6819330426_359a8e4298.jpg" alt="class-diagram2" /></a>  So to conclude the Symfony Form has a minimal dependencies of Event Dispatcher which even can be replaced by writing a custom one that implements Symfony2 &rsquo;s <a href="https://github.com/symfony/EventDispatcher/blob/master/EventDispatcherInterface.php">EventDispatcherInterface</a> .  > @<a href="https://twitter.com/harikt">harikt</a> ah yeah. Form is one of the 3 > components that have required deps (with HttpKernel and Security) > /cc @<a href="https://twitter.com/lsmith">lsmith</a> > > — Christophe Coevoet (@Stof70) > <a href="https://twitter.com/Stof70/status/177430999397957633">March 7, 2012</a>  So the other frameworks need to make the necessary changes even to the core and for the remaining rendering, either they want to use TwigBridge or FrameworkBundle or make your own.  > @<a href="https://twitter.com/harikt">harikt</a> For the rendering, it is not > a hard dependency to TwigBridge. You can write another one once > Form gives you the FormView tree > > — Christophe Coevoet (@Stof70) > <a href="https://twitter.com/Stof70/status/177384161571639296">March 7, 2012</a>  Recently I saw a tweet  > @<a href="https://twitter.com/mattcockayne">mattcockayne</a> would love to > read a blog post where you elaborate on the advantages of > <a href="https://twitter.com/search/%23ZF2">#ZF2</a> over > <a href="https://twitter.com/search/%23Symfony2">#Symfony2</a> /cc > @<a href="https://twitter.com/randomblast">randomblast</a> > > — Lukas Kahwe Smith (@lsmith) > <a href="https://twitter.com/lsmith/status/177891789770985472">March 8, 2012</a>  So I thought of writing what I feel looking at <a href="https://github.com/symfony">Symfony2</a> , <a href="https://github.com/zendframework/zf2">Zend</a> and <a href="https://github.com/auraphp">Aura</a> . I used to hang on in IRC of every channels, as my level of understanding and there are more awesome people who are better than me, I speak less there :&ndash;) , so feel free to correct here if you think at any point I am wrong. Looking from outside both Symfony2 and ZF2 is full of standalone components. But the reality is not the same. Though Symfony2 components are split into each components in github, you cannot give a pull request to that component. The tests for all the components still resides in the <a href="https://github.com/symfony/symfony/tree/master/tests/Symfony/Tests/Component">core</a>. The same will be applying to <a href="https://github.com/zendframework/zf2/tree/master/tests/Zend">Zend Framework 2</a> ( ZF2 ) too. I wrote my concern on the topic in mailing list of Symony2, if you are interested you can read on it <a href="https://groups.google.com/d/topic/symfony-devs/CuwDO8LhReQ/discussion">here</a>.  Let&rsquo;s leave the contributions or pull requests, if I / you are trying to integrate Symfony form component to your project or library, we want to bring the tests some how make the necessary changes to the core if I want to make use of Event Dispatcher / Signal or another like Aura or Zend. Try to make how you can render in your view if I am using <a href="https://github.com/auraphp/Aura.View">Aura View</a> or Zend or even in <a href="https://github.com/weierophinney/phly_mustache">phly_mustache</a>.  So let me tell you the design principle to make them as standalone have some failure. Coming back to Aura, as a small contributor I can see Paul M Jones right decision to make the component library has more to speak. The good thing is Aura has all the tests in one place for the component. For eg: consider <a href="https://github.com/auraphp/Aura.Router">Aura Router the routing component</a>. The source lies in src folder , the tests in tests folder.  The design principles of <a href="http://phix-project.org">phix-project.org</a> by Stuart Herbert is also a good when looking into it. So if you mentions its standalone, it should be easy to setup, easy to contribute etc. The Aura components have no depedencies on any of the components, and I feel the same will happen for the remaining Form, Filtering components which are still to be born. I wonder how Zend can make use of Symfony2, or do you mean a copy and paste of the components and changing namespace giving credits to it and making the necessary changes ? I don&rsquo;t know more on the MIT licence and is that what they want.  Please don&rsquo;t think I am disrespect to any of you, for I love the PHP community. <a href="http://blog.phpdeveloper.org">Chris Cornutt (@enygma) on Twitter</a> voiced his opinion on the decisions made by both Zend and Symfony community of using Zend_Log ( If you don&rsquo;t <a href="http://webmozarts.com/2012/03/06/symfony2-form-architecture/#comment-17698">please have a look</a> ).  Update : I am not telling about installing dependencies for a project . Aura itself is using composer.json , so people can download it via composer and you can browse it from  packagist.org . My point was making use of different compoents from different Vendors with out dependencies on the other . For eg using Aura View, Symfony Form and Zend Validator , and if there is less dependencies and as I told if all tests reside at the same components github repo it makes life easier for developers to push and pull stuffs. Consider the movement of Drupal using Symfony components . Does Drupal 8 uses Symfony as a whole ? No its using some of the core components . So if they want to push something they can do easily. I want to dig more on composer to learn whether there is anything other than installation composer can do .  Updating with @fabpot &rsquo;s own tweet :)  > @<a href="https://twitter.com/rdohms">rdohms</a> If someone told you that > <a href="https://twitter.com/search/%23Symfony">#Symfony</a> is perfect, he&rsquo;s > a complete idiot. > > — Fabien Potencier (@fabpot) > <a href="https://twitter.com/fabpot/status/161408956521119744">January 23, 2012</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[A Local Search for the Li3_docs With Zend_Search_Lucene]]></title>
    <link href="http://harikt.com/blog/2011/01/20/local-search-li3docs-zendsearchlucene/"/>
    <updated>2011-01-20T20:25:00+05:30</updated>
    <id>http://harikt.com/blog/2011/01/20/local-search-li3docs-zendsearchlucene</id>
    <content type="html"><![CDATA[<p>Oh I am lazy for not posting my second cup of lithium over here . But you can check something over <a href="http://dev.li3.me/forks/harikt/lithium_blog/wiki/home">http://dev.li3.me/forks/harikt/lithium_blog/wiki/home</a> . So you know I am a fan boy of Lithium. I used to hang on #li3 irc just for fun, though I am not developing anything serious with lithium for now .  We used to read the documentation with the help of li3_docs plugin. Its so cool. But searching locally was not possible. If you have internet connection then it may not be a trouble too :) . Questions come and go, sometimes we may be knowing where we read it, but don&rsquo;t remember the exact controller action or the property. Oh my :&ndash;)  So I finally decided to hack on li3_docs plugin to make a search locally with the help of the Zend_Search_Lucene &rsquo;s power . You can read more about <a href="http://framework.zend.com/manual/en/zend.search.lucene.overview.html">Zend Lucene component over here</a>. This is also a good point to show you that anything can be integrated with li3 ;). So no more blha blha blha . Just codes coming on the way .  First you need to create the index pointing to /searches/makeindex . Before doing that change the url according to yours. For now I assume <a href="http://lithium.local/docs/">http://lithium.local/docs/</a> which is the only part I have hard coded. Nate has agreed to look into it and make the necessary changes and we will try to make it as plugin if he loves :&ndash;). So the files are below. I hope know something about li3, li3_docs etc. This uses the extractor from li3_docs :&ndash;)  You can see how I have included the Zend library as from <a href="http://dev.li3.me/lithium/wiki/guides/using/zend">http://dev.li3.me/lithium/wiki/guides/using/zend</a>  Do create an empty file makeindex.html.php in the searches folder of view before creating index.  Now do your way, may be add a form and point to the controller and action or what ever you love. As always licensed under the same licene of <a href="http://li3.me/">http://li3.me/</a> . Hang on to #li3 on irc.freenode.net to ask anything more on it :&ndash;) .  Note : Set time limit to 0 . ie  set_time_limit( 0 ); in bootstrap.php for creating the index. The methods are called recursively and needs sometime to create the index . Once indexed you don&rsquo;t want , just query through it .</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Integrating Doctrine With Zendframework for Modules]]></title>
    <link href="http://harikt.com/blog/2010/08/29/integrating-doctrine-zendframework-modules/"/>
    <updated>2010-08-29T21:39:00+05:30</updated>
    <id>http://harikt.com/blog/2010/08/29/integrating-doctrine-zendframework-modules</id>
    <content type="html"><![CDATA[<p>When I started learning PHP framework I started with <a href="http://www.symfony-project.org/">symfony-project</a> . <a href="http://www.doctrine-project.org">Doctrine</a> was one of the coolest feature I loved. So I thought of learning Doctrine to use with <a href="http://framework.zend.com/">Zend-framework</a> . Recently I was looking  <a href="http://zendcasts.com">zendcasts.com</a> to integrate doctrine with zend-framework . I think Jon didn&rsquo;t get much time to think about this solution else he may have come with the module based solution . But I was interested to provide how we can bring the doctrine models to different modules for zendframework. Use the below code in doctrine.php when using <a href="http://www.zendcasts.com/deep-integration-between-zend-and-doctrine-1-2/2010/01/">zendcasts doctrine integration with zendframework</a> .  The way it works is  $./doctrine &lt; arguments for doctrine > module <module name \>  Module name is the zendframework module . If no module is specified or the specified module directory is not found , will create in the application/models folder . Else the models folder of the particular module. Assuming the migrations , schema.yml , fixtures etc are  there for each specific module :) .</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Thinking of Developing an Application With Zend Framework]]></title>
    <link href="http://harikt.com/blog/2010/06/15/thinking-developing-application-zend-framework/"/>
    <updated>2010-06-15T23:35:00+05:30</updated>
    <id>http://harikt.com/blog/2010/06/15/thinking-developing-application-zend-framework</id>
    <content type="html"><![CDATA[<p><a href="http://www.flickr.com/photos/harikt/4703475643/"><img src="http://farm5.static.flickr.com/4031/4703475643_c68bbc34ce.jpg" alt="Zendframework 2 logo by zend technologies" /></a>  Picture courtsey to <a href="http://www.facebook.com/pages/Zend-Technologies/190917412139">zend technologies</a> . When I started learning a MVC framework like Zend ( version 1.8 ) with out any prior knowledge in an MVC architectured framework , it was hard for me to figure out many of the things documented in framework.zend.com . I spend lot of time to figure out what they have shown in the examples to <a href="http://harikt.com/content/simple-blog-using-zend-framework-19">develop a simple application which I later published to help people</a> learning zend framework ( Though it was not developed thinking in my mind to publish, I hope it helped some ) . But looking today the zend framework documentation has lots of improvements, may be because I learned something looking other frameworks too. I was interested to see much of the things what symfony does in the command line ( for I love my GNU/Linux terminal and love to work on it ). But after sometime I came to know many of the things that symfony does is with doctrine ORM ( There are lots of other commands too for symfony ) . Doctrine2 will be integrating with zend framework version 2 onwards .  Sometimes I have even blamed zend framework , for I was angry unable to do what I needed spending hours of searching . But I am sorry for that zend. You may ask me why you didn&rsquo;t get into irc or mailing list and ask your doubts . Ya I entered to irc for the first time when I started learning #zf , but its hard to get a quick reply. I saw many people asking questions , but many were not answered . I know the reasons for they will be working on their on projects and getting a quick reply was hard.  Ok let&rsquo;s move on to my topic, I am planning to learn/ sharpen my knowledge in <a href="http://framework.zend.com/">Zend framework</a> . I would you to suggest me some topics , that you love to see implemented with zend framework in my spare time. I will be trying to use <a href="http://www.doctrine-project.org/">Doctrine ORM</a>. I would love to develop it with TDD using <a href="http://www.phpunit.de">phpunit</a> ( Every thing is new just having some knowledge which is harmful <img src="http://harikt.com/sites/all/libraries/fckeditor/editor/images/smiley/msn/regular_smile.gif" alt="image" /> ). If you have anything in your mind let me know .  Thanks for reading my unwanted thoughts .</p>
]]></content>
  </entry>
  
</feed>
