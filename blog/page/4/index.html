
<!DOCTYPE HTML>
<!--
	Telephasic 1.1 by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Random thoughts | Hari KT</title>        
        <meta name="author" content="Hari K T">
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		
        <meta name="description" content="I have created a repo seriously, and have 3 commits as of now . It has a file hell.php. I have created it by logging into user X
and with vim as the &hellip;">
        
		<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,600" rel="stylesheet" type="text/css" />
		<!--[if lte IE 8]><script src="js/html5shiv.js"></script><![endif]-->
        
        <link rel="canonical" href="http://harikt.com/blog/page/4">
		<script src="/js/jquery.min.js"></script>
		<script src="/js/jquery.dropotron.min.js"></script>
		<script src="/js/skel.min.js"></script>
		<script src="/js/skel-panels.min.js"></script>
		<script src="/js/init.js"></script>
    <link rel="stylesheet" href="/stylesheets/screen.css" />
		<noscript>
			<link rel="stylesheet" href="/css/skel-noscript.css" />
			<link rel="stylesheet" href="/css/style.css" />
			<link rel="stylesheet" href="/css/style-n1.css" />
		</noscript>
        <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

        
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-5998889-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


	</head>

<body  class="right-sidebar">
  <!-- Header Wrapper -->
  <div id="header-wrapper">
      <!-- Header -->
<div id="header" class="container">
    
    <!-- Logo -->
        <h1 id="logo"><a href="/">Home</a></h1>
    
    <!-- Nav -->
        <nav id="nav">
            <ul>
    <li>
        <a href="/blog">Blog</a>
        <ul>
            <li><a href="/blog/archives">Archives</a></li>
        </ul>
    </li>
    <li><a href="/work/">Work</a></li>
    <li class="break"><a href="/who-am-i/">About</a></li>
    <li><a href="/opensource/">Open source</a></li>
</ul>


        </nav>

</div>

      
  </div>
  <!-- Main Wrapper -->
  <div class="wrapper">
    <div class="container">
      <div class="row" id="main">
  <div class="8u">
    <!-- Content -->
    
    
    
      <article>
        
  <header>
          
      <h2><a href="/blog/2013/02/27/seriously-tab-vs-spaces/">Seriously? Tab vs Spaces</a></h2>
    
    
      <span>
        








  


<time datetime="2013-02-27T07:38:00+05:30" pubdate data-updated="true">Feb 27<span>th</span>, 2013</time>
        
      </span>
    
  </header>


  <div class="entry-content"><p>I have created a repo <a href="https://github.com/harikt/seriosuly">seriously</a>, and have <a href="https://github.com/harikt/seriosuly/commits/master">3 commits</a> as of now .</p>

<p>It has a file <a href="https://github.com/harikt/seriosuly/blob/master/hell.php">hell.php</a>. I have created it by logging into <code>user X</code>
and with vim as the editor without any settings in .vimrc.</p>

<p><img class="center" src="/assets/images/vim-tab.png" title="vim with no settings, and used tab" alt="vim with no settings, and used tab"></p>

<p>Then from user <code>harikt</code> I have edited with vim which has some .vimrc
setting like 1 tab = 4 spaces. Look into the <a href="https://github.com/harikt/seriosuly/blob/master/hell.php">code</a> and see how beautiful
it is.</p>

<p>Opening with geany it looks</p>

<p><img class="center" src="/assets/images/geany.png" title="Oh from geany with settings 1 tab = 4 spaces" alt="Oh from geany with settings 1 tab = 4 spaces"></p>

<p>Let us don&rsquo;t create problems, but solutions!</p>

<p>It is just one line you need to mention</p>

<p>&ldquo;According to your editor settings set 1 tab = 4 spaces.&rdquo; . no?</p>

<p>Or you don&rsquo;t need to convert the tab at all?</p>

<p>Is your tabs 4 spaces, 8 spaces, 2 spaces?</p>

<p>Please fork and commit with your favourite editor mentioning the settings,
editor in your commit.</p>

<p>As as user I prefer consistency . And as I work with Aura, Symfony2,
ZF1, ZF2 I love to follow spaces, than individual projects choosing their
own styles which is a main benefit probably mostly to its users like me
than the core developers of individual system who don&rsquo;t care about
other projects or its users?</p>

<p>After all when your project says we use tabs, do you care people who love
to use spaces there? Do you merge when something like this comes?</p>
</div>
  
  


      </article>
    
    
      <article>
        
  <header>
          
      <h2><a href="/blog/2013/02/22/aura-turns-2/">Aura Turns 2</a></h2>
    
    
      <span>
        








  


<time datetime="2013-02-22T23:07:00+05:30" pubdate data-updated="true">Feb 22<span>nd</span>, 2013</time>
        
      </span>
    
  </header>


  <div class="entry-content"><p>Looking over <a href="https://github.com/auraphp/Aura.Router/commit/8de403dc49bf803a1fd641f55726079853716ab7">the commits on Aura.Router</a>, <a href="https://github.com/auraphp/Aura.Signal">Aura.Signal</a> etc you will
notice, <a href="https://github.com/auraphp">aura project</a> has turned 2.</p>

<p>And today, I would like to introduce you, the new born baby still under active
development and refactoring based on user feedback, the
<a href="https://github.com/auraphp/Aura.Input">form library for php, Aura.Input</a>.</p>

<p>The <a href="https://github.com/auraphp/Aura.Input">Aura.Input</a>, doesn&rsquo;t have a rendering functionality. But you can always
use Aura.View or create your own helpers.</p>

<p>A basic filtering based on closure exists in <a href="https://github.com/auraphp/Aura.Input">Aura.Input</a>. But you are
not limited, you can use your own filtering components or
integrate <a href="https://github.com/auraphp/Aura.Filter">Aura.Filter</a>.</p>

<p>Let us look at some code.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="c1">// use composer or require &#39;/path/to/Aura.Input/src.php&#39;;</span>
</span><span class='line'>
</span><span class='line'><span class="k">use</span> <span class="nx">Aura\Input\Form</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="nx">Aura\Input\Builder</span><span class="p">;</span>
</span><span class='line'><span class="k">use</span> <span class="nx">Aura\Input\Filter</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$filter</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Aura\Input\Filter</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// validate</span>
</span><span class='line'><span class="nv">$filter</span><span class="o">-&gt;</span><span class="na">setRule</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;Name should be alpha only&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nb">ctype_alpha</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$filter</span><span class="o">-&gt;</span><span class="na">setRule</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">,</span> <span class="s1">&#39;Enter a valid email address&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nb">filter_var</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nx">FILTER_VALIDATE_EMAIL</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$filter</span><span class="o">-&gt;</span><span class="na">setRule</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;Enter a valid url&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nb">filter_var</span><span class="p">(</span><span class="nv">$value</span><span class="p">,</span> <span class="nx">FILTER_VALIDATE_URL</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$filter</span><span class="o">-&gt;</span><span class="na">setRule</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="s1">&#39;Message should be more than 7 characters&#39;</span><span class="p">,</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="nb">strlen</span><span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">7</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">ContactForm</span> <span class="k">extends</span> <span class="nx">Form</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">public</span> <span class="k">function</span> <span class="nf">init</span><span class="p">()</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="nv">$name</span>    <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setField</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="nv">$email</span>   <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setField</span><span class="p">(</span><span class="s1">&#39;email&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="nv">$url</span>     <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setField</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="nv">$message</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">setField</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="s1">&#39;textarea&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$form</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ContactForm</span><span class="p">(</span><span class="k">new</span> <span class="nx">Builder</span><span class="p">,</span> <span class="nv">$filter</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$values</span> <span class="o">=</span> <span class="p">[</span>
</span><span class='line'>    <span class="s1">&#39;name&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Hari K T&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;email&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;oh will it works!&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;google.com&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;message&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Aweso&#39;</span>
</span><span class='line'><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$form</span><span class="o">-&gt;</span><span class="na">setValues</span><span class="p">(</span><span class="nv">$values</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$passed</span> <span class="o">=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">filter</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// &#39;foo&#39; is invalid</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="o">!</span> <span class="nv">$passed</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// get all messages</span>
</span><span class='line'>    <span class="nv">$actual</span> <span class="o">=</span> <span class="nv">$form</span><span class="o">-&gt;</span><span class="na">getMessages</span><span class="p">();</span>
</span><span class='line'>    <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$actual</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Try it out, we have some more documentation for the <a href="https://github.com/auraphp/Aura.Input">Aura.Input</a>. I warn
the api is still not stable for <a href="https://github.com/auraphp/Aura.Input">Aura.Input</a> and is not yet released a Beta.</p>

<p>But it is a good start!</p>
</div>
  
  


      </article>
    
    
      <article>
        
  <header>
          
      <h2><a href="/blog/2013/02/16/aura-dot-http-request-and-response/">Aura.Http : Request and Response</a></h2>
    
    
      <span>
        








  


<time datetime="2013-02-16T14:44:00+05:30" pubdate data-updated="true">Feb 16<span>th</span>, 2013</time>
        
      </span>
    
  </header>


  <div class="entry-content"><p>The <code>Aura.Http</code> package provide you the tool to build and send request and response.</p>

<h1>Instantiation:</h1>

<p>The easiest way is</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$http</span> <span class="o">=</span> <span class="k">require</span> <span class="s1">&#39;path/to/Aura.Http/scripts/instance.php&#39;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>What it gives you is an object of <code>Aura\Http\Manager</code>. If you want to create
manually you can look into the <code>instance.php</code></p>

<h1>Building your Response</h1>

<p>Probably you may not have bothered too much on building the http response
either the framework does it for you, or until you need to send the correct
response.</p>

<p>To create a proper http response via <code>Aura.Http</code> we need to create a
response object.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$response</span> <span class="o">=</span> <span class="nv">$http</span><span class="o">-&gt;</span><span class="na">newResponse</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now you have the response object. You can set the <code>header</code> via</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;Header&#39;</span><span class="p">,</span> <span class="s1">&#39;Value&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you have an array of headers you can use <code>setAll</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">setAll</span><span class="p">([</span>
</span><span class='line'>    <span class="s1">&#39;Header-One&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;header one value&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;Header-Two&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span><span class='line'>        <span class="s1">&#39;header two value A&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;header two value B&#39;</span><span class="p">,</span>
</span><span class='line'>        <span class="s1">&#39;header two value C&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="p">],</span>
</span><span class='line'><span class="p">]);</span>
</span></code></pre></td></tr></table></div></figure>


<p>So a basic example of setting header value is</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;text/plain&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Setting Content</h2>

<p>The header values are for the browser to understand what is coming from
server, and how it should render etc.</p>

<p>So we need to set the content. This can be achieved via <code>setContent</code> method.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setContent</span><span class="p">(</span><span class="s1">&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;Hello World!&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can always get the content via calling <code>getContent</code>.</p>

<h2>Setting and Getting Cookies</h2>

<p>Sometimes we may want to set the cookies. You can do it as</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">cookies</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;cookie_name&#39;</span><span class="p">,</span> <span class="p">[</span>
</span><span class='line'>    <span class="s1">&#39;value&#39;</span>    <span class="o">=&gt;</span> <span class="s1">&#39;cookie value&#39;</span><span class="p">,</span> <span class="c1">// cookie value</span>
</span><span class='line'>    <span class="s1">&#39;expire&#39;</span>   <span class="o">=&gt;</span> <span class="nb">time</span><span class="p">()</span> <span class="o">+</span> <span class="mi">3600</span><span class="p">,</span>  <span class="c1">// expiration time in unix epoch seconds</span>
</span><span class='line'>    <span class="s1">&#39;path&#39;</span>     <span class="o">=&gt;</span> <span class="s1">&#39;/path&#39;</span><span class="p">,</span>        <span class="c1">// server path for the cookie</span>
</span><span class='line'>    <span class="s1">&#39;domain&#39;</span>   <span class="o">=&gt;</span> <span class="s1">&#39;example.com&#39;</span><span class="p">,</span>  <span class="c1">// domain for the cookie</span>
</span><span class='line'>    <span class="s1">&#39;secure&#39;</span>   <span class="o">=&gt;</span> <span class="k">false</span><span class="p">,</span>          <span class="c1">// send by ssl only?</span>
</span><span class='line'>    <span class="s1">&#39;httponly&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>           <span class="c1">// send by http/https only?</span>
</span><span class='line'><span class="p">]);</span>
</span></code></pre></td></tr></table></div></figure>


<p>The array keys mimic the <a href="http://php.net/setcookies">setcookie</a> parameters. If you have an array
you can use <code>setAll</code>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">cookies</span><span class="o">-&gt;</span><span class="na">setAll</span><span class="p">([</span>
</span><span class='line'>    <span class="s1">&#39;cookie_foo&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span><span class='line'>        <span class="s1">&#39;value&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;value for cookie foo&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="p">],</span>
</span><span class='line'>    <span class="s1">&#39;cookie_bar&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span>
</span><span class='line'>        <span class="s1">&#39;value&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;value for cookie bar&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="p">],</span>
</span><span class='line'><span class="p">]);</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can get a cookie by calling <code>get</code> method on cookies.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">cookies</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;cookie_name&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Setting and Getting Status</h2>

<p>By default the status code is 200. But at some point of time
like the one I explained earlier in <a href="http://harikt.com/blog/2012/12/16/status-code-304/">Status Code 304</a>, we don&rsquo;t need to
send the whole content. But just the status code.</p>

<p>This is possible via <code>setStatusCode</code> and <code>setStatusText</code></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setStatusCode</span><span class="p">(</span><span class="mi">304</span><span class="p">);</span>
</span><span class='line'><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setStatusText</span><span class="p">(</span><span class="s1">&#39;Same As It Ever Was&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Sending your response</h2>

<p>And finally we can send the response back. We can call the <code>send</code>
method and pass the <code>response</code> object.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$http</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>The full source code of example is</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$http</span> <span class="o">=</span> <span class="k">require</span> <span class="s1">&#39;path/to/Aura.Http/scripts/instance.php&#39;</span><span class="p">;</span>
</span><span class='line'><span class="c1">// send a response</span>
</span><span class='line'><span class="nv">$response</span> <span class="o">=</span> <span class="nv">$http</span><span class="o">-&gt;</span><span class="na">newResponse</span><span class="p">();</span>
</span><span class='line'><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;text/plain&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setContent</span><span class="p">(</span><span class="s1">&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;Hello World!&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nv">$http</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>From terminal start the server by <code>php -S localhost:8000 example.php</code> and
pointintg to <code>localhost:8000</code> in your browser.</p>

<p>In order to render just <code>Hello World!</code> in the browser the <code>Content-Type</code> we added should be
<code>text/html</code>.</p>

<p>We can always change the header status code, content-type etc
before we call <code>send()</code> method.</p>

<p>Let us modify the example at <a href="http://harikt.com/blog/2012/12/16/status-code-304/">Status Code 304</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$http</span> <span class="o">=</span> <span class="k">require</span> <span class="s1">&#39;path/to/Aura.Http/scripts/instance.php&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$response</span> <span class="o">=</span> <span class="nv">$http</span><span class="o">-&gt;</span><span class="na">newResponse</span><span class="p">();</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_IF_MODIFIED_SINCE&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span>
</span><span class='line'>    <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_IF_MODIFIED_SINCE&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tue, 15 Jan 2011 12:00 GMT&#39;</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setStatusCode</span><span class="p">(</span><span class="mi">304</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">,</span> <span class="s1">&#39;text/html&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">headers</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;Last-Modified&#39;</span><span class="p">,</span> <span class="s1">&#39;Tue, 15 Jan 2011 12:00 GMT&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nv">$response</span><span class="o">-&gt;</span><span class="na">setContent</span><span class="p">(</span><span class="s1">&#39;&lt;html&gt;&lt;head&gt;&lt;title&gt;&lt;/title&gt;&lt;/head&gt;&lt;body&gt;Hello World!&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nv">$http</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="nv">$response</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>You would have noticed I have used <code>$_SERVER</code> variable. In <code>Aura.Http</code>,
there is no methods to access the global server values. This is because
the <code>$_SERVER</code> values are not the exact http requested header. The server
modifies the request and we will be only getting the manipulated values
if we use <code>$_SERVER</code>, <code>$_GET</code>, <code>$_POST</code> values.</p>

<p><code>Aura.Http</code> only helps you to build, create, modify response and request.</p>

<h1>Creating Http Request</h1>

<p>We talked about response so far. What does Request actually mean?</p>

<p>Client &ndash;> Request something &ndash;> Server Responds</p>

<p>So that means we are trying to be a client or a browser, and making the necessary
headers and sending to server to get the corresponding response.</p>

<p>We can get all the repos of a user in github via curl.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">curl</span> <span class="o">-</span><span class="nx">i</span> <span class="nx">https</span><span class="o">://</span><span class="nx">api</span><span class="o">.</span><span class="nx">github</span><span class="o">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">users</span><span class="o">/</span><span class="nx">pmjones</span><span class="o">/</span><span class="nx">repos</span>
</span></code></pre></td></tr></table></div></figure>


<p>The same can be achieved via <a href="https://github.com/auraphp/Aura.Http">Aura.Http</a>. The <a href="https://github.com/auraphp/Aura.Http">Aura.Http</a> provides a
means to do the same with PHP. It uses <code>curl</code> if it is available or <code>stream</code>
to make this happen.</p>

<p>You need to create a Request object.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$request</span> <span class="o">=</span> <span class="nv">$http</span><span class="o">-&gt;</span><span class="na">newRequest</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>Set the url via <code>setUrl</code> method and send.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$request</span><span class="o">-&gt;</span><span class="na">setUrl</span><span class="p">(</span><span class="s1">&#39;https://api.github.com/users/pmjones/repos&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nv">$stack</span> <span class="o">=</span> <span class="nv">$http</span><span class="o">-&gt;</span><span class="na">send</span><span class="p">(</span><span class="nv">$request</span><span class="p">);</span>
</span><span class='line'><span class="nv">$repos</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nv">$stack</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-&gt;</span><span class="na">content</span><span class="p">);</span>
</span><span class='line'><span class="k">foreach</span> <span class="p">(</span><span class="nv">$repos</span> <span class="k">as</span> <span class="nv">$repo</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">echo</span> <span class="nv">$repo</span><span class="o">-&gt;</span><span class="na">name</span> <span class="o">.</span> <span class="nx">PHP_EOL</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>There are more things to say. It can do basic authentication, post values etc.
Browse the documentation examples, source code, tests, and api.</p>

<p>Source Code : <a href="https://github.com/auraphp/Aura.Http">https://github.com/auraphp/Aura.Http</a></p>

<p>Documentation : <a href="http://auraphp.github.com/Aura.Http/version/1.0.0/">http://auraphp.github.com/Aura.Http/version/1.0.0/</a></p>

<p>API : <a href="http://auraphp.github.com/Aura.Http/version/1.0.0/api/">http://auraphp.github.com/Aura.Http/version/1.0.0/api/</a></p>
</div>
  
  


      </article>
    
    
      <article>
        
  <header>
          
      <h2><a href="/blog/2013/01/09/our-awesome-php-people/">Our Awesome Php People</a></h2>
    
    
      <span>
        








  


<time datetime="2013-01-09T20:00:00+05:30" pubdate data-updated="true">Jan 9<span>th</span>, 2013</time>
        
      </span>
    
  </header>


  <div class="entry-content"><p>Recently github introduces contributions chart. So I peeped into some of the people of our php community. It seems <a href="https://github.com/fabpot">@fabpot</a> is the one who contributes almost every day. Just 21 days without any contribution.</p>

<p><a href="https://github.com/fabpot"><img class="center" src="/assets/images/github/fabpot.png" width="687" height="299" title="Contributions by fabpot" alt="Contributions by fabpot"></a>
<a href="https://github.com/weierophinney"><img class="center" src="/assets/images/github/weierophinney.png" width="687" height="299" title="Contributions by weierophinney" alt="Contributions by weierophinney"></a>
<a href="https://github.com/pmjones"><img class="center" src="/assets/images/github/pmjones.png" width="687" height="299" title="Contributions by pmjones" alt="Contributions by pmjones"></a>
<a href="https://github.com/willdurand"><img class="center" src="/assets/images/github/willdurand.png" width="687" height="299" title="Contributions by willdurand" alt="Contributions by willdurand"></a>
<a href="https://github.com/Seldaek"><img class="center" src="/assets/images/github/Seldaek.png" width="687" height="299" title="Contributions by Seldaek" alt="Contributions by Seldaek"></a>
<a href="https://github.com/markstory"><img class="center" src="/assets/images/github/markstory.png" width="687" height="299" title="Contributions by markstory" alt="Contributions by markstory"></a>
<a href="https://github.com/taylorotwell"><img class="center" src="/assets/images/github/taylorotwell.png" width="687" height="299" title="Contributions by taylorotwell" alt="Contributions by taylorotwell"></a>
<a href="https://github.com/WanWizard"><img class="center" src="/assets/images/github/WanWizard.png" width="687" height="299" title="Contributions by WanWizard" alt="Contributions by WanWizard"></a>
<a href="https://github.com/drak"><img class="center" src="/assets/images/github/drak.png" width="687" height="299" title="Contributions by drak" alt="Contributions by drak"></a>
<a href="https://github.com/nikic"><img class="center" src="/assets/images/github/nikic.png" width="687" height="299" title="Contributions by nikic" alt="Contributions by nikic"></a>
<a href="https://github.com/avalanche123"><img class="center" src="/assets/images/github/avalanche123.png" width="687" height="299" title="Contributions by avalanche123" alt="Contributions by avalanche123"></a>
<a href="https://github.com/shama"><img class="center" src="/assets/images/github/shama.png" width="687" height="299" title="Contributions by shama" alt="Contributions by shama"></a>
<a href="https://github.com/vrana"><img class="center" src="/assets/images/github/vrana.png" width="687" height="299" title="Contributions by vrana" alt="Contributions by vrana"></a>
<a href="https://github.com/philsturgeon"><img class="center" src="/assets/images/github/philsturgeon.png" width="687" height="299" title="Contributions by philsturgeon" alt="Contributions by philsturgeon"></a>
<a href="https://github.com/DASPRiD"><img class="center" src="/assets/images/github/DASPRiD.png" width="687" height="299" title="Contributions by DASPRiD" alt="Contributions by DASPRiD"></a>
<a href="https://github.com/mvriel"><img class="center" src="/assets/images/github/mvriel.png" width="687" height="299" title="Contributions by mvriel" alt="Contributions by mvriel"></a>
<a href="https://github.com/c9s"><img class="center" src="/assets/images/github/c9s.png" width="687" height="299" title="Contributions by c9s" alt="Contributions by c9s"></a>
<a href="https://github.com/weaverryan"><img class="center" src="/assets/images/github/weaverryan.png" width="687" height="299" title="Contributions by weaverryan" alt="Contributions by weaverryan"></a>
<a href="https://github.com/bschussek"><img class="center" src="/assets/images/github/bschussek.png" width="687" height="299" title="Contributions by bschussek" alt="Contributions by bschussek"></a>
<a href="https://github.com/vicb"><img class="center" src="/assets/images/github/vicb.png" width="687" height="299" title="Contributions by vicb" alt="Contributions by nateabele"></a>
<a href="https://github.com/garak"><img class="center" src="/assets/images/github/garak.png" width="687" height="299" title="Contributions by garak" alt="Contributions by garak"></a>
<a href="https://github.com/beberlei"><img class="center" src="/assets/images/github/beberlei.png" width="687" height="299" title="Contributions by beberlei" alt="Contributions by beberlei"></a>
<a href="https://github.com/codeguy"><img class="center" src="/assets/images/github/codeguy.png" width="687" height="299" title="Contributions by codeguy" alt="Contributions by codeguy"></a>
<a href="https://github.com/lsmith77"><img class="center" src="/assets/images/github/lsmith77.png" width="687" height="299" title="Contributions by lsmith77" alt="Contributions by lsmith77"></a>
<a href="https://github.com/stof"><img class="center" src="/assets/images/github/stof.png" width="687" height="299" title="Contributions by stof" alt="Contributions by stof"></a>
<a href="https://github.com/EavnDotPro"><img class="center" src="/assets/images/github/EavnDotPro.png" width="687" height="299" title="Contributions by EavnDotPro" alt="Contributions by EavnDotPro"></a>
<a href="https://github.com/nateabele"><img class="center" src="/assets/images/github/nateabele.png" width="687" height="299" title="Contributions by nateabele" alt="Contributions by nateabele"></a>
<a href="https://github.com/kriswallsmith"><img class="center" src="/assets/images/github/kriswallsmith.png" width="687" height="299" title="Contributions by kriswallsmith" alt="Contributions by kriswallsmith"></a>
<a href="https://github.com/nrk"><img class="center" src="/assets/images/github/nrk.png" width="687" height="299" title="Contributions by nrk" alt="Contributions by nrk"></a>
<a href="https://github.com/naderman"><img class="center" src="/assets/images/github/naderman.png" width="687" height="299" title="Contributions by naderman" alt="Contributions by naderman"></a>
<a href="https://github.com/gwoo"><img class="center" src="/assets/images/github/gwoo.png" width="687" height="299" title="Contributions by gwoo" alt="Contributions by gwoo"></a>
<a href="https://github.com/jwage"><img class="center" src="/assets/images/github/jwage.png" width="687" height="299" title="Contributions by jwage" alt="Contributions by jwage"></a>
<a href="https://github.com/chartjes"><img class="center" src="/assets/images/github/chartjes.png" width="687" height="299" title="Contributions by chartjes" alt="Contributions by chartjes"></a>
<a href="https://github.com/Tocacar"><img class="center" src="/assets/images/github/Tocacar.png" width="687" height="299" title="Contributions by Tocacar" alt="Contributions by Tocacar"></a>
<a href="https://github.com/FrenkyNet"><img class="center" src="/assets/images/github/FrenkyNet.png" width="687" height="299" title="Contributions by FrenkyNet" alt="Contributions by FrenkyNet"></a>
<a href="https://github.com/till"><img class="center" src="/assets/images/github/till.png" width="687" height="299" title="Contributions by till" alt="Contributions by till"></a>
<a href="https://github.com/Ocramius"><img class="center" src="/assets/images/github/Ocramius.png" width="687" height="299" title="Contributions by Ocramius" alt="Contributions by Ocramius"></a>
<a href="https://github.com/odino"><img class="center" src="/assets/images/github/odino.png" width="687" height="299" title="Contributions by odino" alt="Contributions by odino"></a>
<a href="https://github.com/josegonzalez"><img class="center" src="/assets/images/github/josegonzalez.png" width="687" height="299" title="Contributions by josegonzalez" alt="Contributions by josegonzalez"></a>
<a href="https://github.com/dereuromark"><img class="center" src="/assets/images/github/dereuromark.png" width="687" height="299" title="Contributions by dereuromark" alt="Contributions by dereuromark"></a>
<a href="https://github.com/HosipLan"><img class="center" src="/assets/images/github/HosipLan.png" width="687" height="299" title="Contributions by HosipLan" alt="Contributions by HosipLan"></a>
<a href="https://github.com/alganet"><img class="center" src="/assets/images/github/alganet.png" width="687" height="299" title="Contributions by alganet" alt="Contributions by alganet"></a>
<a href="https://github.com/ezimuel"><img class="center" src="/assets/images/github/ezimuel.png" width="687" height="299" title="Contributions by ezimuel" alt="Contributions by ezimuel"></a>
<a href="https://github.com/auroraeosrose"><img class="center" src="/assets/images/github/auroraeosrose.png" width="687" height="299" title="Contributions by auroraeosrose" alt="Contributions by auroraeosrose"></a>
<a href="https://github.com/enygma"><img class="center" src="/assets/images/github/enygma.png" width="687" height="299" title="Contributions by enygma" alt="Contributions by enygma"></a>
<a href="https://github.com/ralphschindler"><img class="center" src="/assets/images/github/ralphschindler.png" width="687" height="299" title="Contributions by ralphschindler" alt="Contributions by ralphschindler"></a>
<a href="https://github.com/AD7six"><img class="center" src="/assets/images/github/AD7six.png" width="687" height="299" title="Contributions by AD7six" alt="Contributions by AD7six"></a>
<a href="https://github.com/ADmad"><img class="center" src="/assets/images/github/ADmad.png" width="687" height="299" title="Contributions by ADmad" alt="Contributions by ADmad"></a>
<a href="https://github.com/augustohp"><img class="center" src="/assets/images/github/augustohp.png" width="687" height="299" title="Contributions by augustohp" alt="Contributions by augustohp"></a>
<a href="https://github.com/BlaineSch"><img class="center" src="/assets/images/github/BlaineSch.png" width="687" height="299" title="Contributions by BlaineSch" alt="Contributions by BlaineSch"></a>
<a href="https://github.com/alexbilbie"><img class="center" src="/assets/images/github/alexbilbie.png" width="687" height="299" title="Contributions by alexbilbie" alt="Contributions by alexbilbie"></a>
<a href="https://github.com/narfbg"><img class="center" src="/assets/images/github/narfbg.png" width="687" height="299" title="Contributions by narfbg" alt="Contributions by narfbg"></a>
<a href="https://github.com/dg"><img class="center" src="/assets/images/github/dg.png" width="687" height="299" title="Contributions by dg" alt="Contributions by dg"></a>
<a href="https://github.com/schmittjoh"><img class="center" src="/assets/images/github/schmittjoh.png" width="687" height="299" title="Contributions by schmittjoh" alt="Contributions by schmittjoh"></a>
<a href="https://github.com/jschreuder"><img class="center" src="/assets/images/github/jschreuder.png" width="687" height="299" title="Contributions by jschreuder" alt="Contributions by jschreuder"></a>
<a href="https://github.com/Geczy"><img class="center" src="/assets/images/github/Geczy.png" width="687" height="299" title="Contributions by Geczy" alt="Contributions by Geczy"></a>
<a href="https://github.com/dzuelke"><img class="center" src="/assets/images/github/dzuelke.png" width="687" height="299" title="Contributions by dzuelke" alt="Contributions by dzuelke"></a>
<a href="https://github.com/evert"><img class="center" src="/assets/images/github/evert.png" width="687" height="299" title="Contributions by evert" alt="Contributions by evert"></a>
<a href="https://github.com/akrabat"><img class="center" src="/assets/images/github/akrabat.png" width="687" height="299" title="Contributions by akrabat" alt="Contributions by akrabat"></a>
<a href="https://github.com/seejohnrun"><img class="center" src="/assets/images/github/seejohnrun.png" width="687" height="299" title="Contributions by seejohnrun" alt="Contributions by seejohnrun"></a>
<a href="https://github.com/guilhermeblanco"><img class="center" src="/assets/images/github/guilhermeblanco.png" width="687" height="299" title="Contributions by guilhermeblanco" alt="Contributions by guilhermeblanco"></a>
<a href="https://github.com/Maks3w"><img class="center" src="/assets/images/github/Maks3w.png" width="687" height="299" title="Contributions by Maks3w" alt="Contributions by Maks3w"></a>
<a href="https://github.com/kore"><img class="center" src="/assets/images/github/kore.png" width="687" height="299" title="Contributions by kore" alt="Contributions by kore"></a>
<a href="https://github.com/dragoonis"><img class="center" src="/assets/images/github/dragoonis.png" width="687" height="299" title="Contributions by dragoonis" alt="Contributions by dragoonis"></a>
<a href="https://github.com/daschl"><img class="center" src="/assets/images/github/daschl.png" width="687" height="299" title="Contributions by daschl" alt="Contributions by daschl"></a>
<a href="https://github.com/wilmoore"><img class="center" src="/assets/images/github/wilmoore.png" width="687" height="299" title="Contributions by wilmoore" alt="Contributions by wilmoore"></a>
<a href="https://github.com/TheFrozenFire"><img class="center" src="/assets/images/github/TheFrozenFire.png" width="687" height="299" title="Contributions by TheFrozenFire" alt="Contributions by TheFrozenFire"></a>
<a href="https://github.com/nickl-"><img class="center" src="/assets/images/github/nickl-.png" width="687" height="299" title="Contributions by nickl-" alt="Contributions by nickl-"></a>
<a href="https://github.com/lorenzo"><img class="center" src="/assets/images/github/lorenzo.png" width="687" height="299" title="Contributions by lorenzo" alt="Contributions by lorenzo"></a>
<a href="https://github.com/rchavik"><img class="center" src="/assets/images/github/rchavik.png" width="687" height="299" title="Contributions by rchavik" alt="Contributions by rchavik"></a>
<a href="https://github.com/davidpersson"><img class="center" src="/assets/images/github/davidpersson.png" width="687" height="299" title="Contributions by davidpersson" alt="Contributions by davidpersson"></a>
<a href="https://github.com/henriquemoody"><img class="center" src="/assets/images/github/henriquemoody.png" width="687" height="299" title="Contributions by henriquemoody" alt="Contributions by henriquemoody"></a>
<a href="https://github.com/Freeaqingme"><img class="center" src="/assets/images/github/Freeaqingme.png" width="687" height="299" title="Contributions by Freeaqingme" alt="Contributions by Freeaqingme"></a>
<a href="https://github.com/dbu"><img class="center" src="/assets/images/github/dbu.png" width="687" height="299" title="Contributions by dbu" alt="Contributions by dbu"></a>
<a href="https://github.com/dshafik"><img class="center" src="/assets/images/github/dshafik.png" width="687" height="299" title="Contributions by dshafik" alt="Contributions by dshafik"></a>
<a href="https://github.com/Vrtak-CZ"><img class="center" src="/assets/images/github/Vrtak-CZ.png" width="687" height="299" title="Contributions by Vrtak-CZ" alt="Contributions by Vrtak-CZ"></a>
<a href="https://github.com/padraic"><img class="center" src="/assets/images/github/padraic.png" width="687" height="299" title="Contributions by padraic" alt="Contributions by padraic"></a>
<a href="https://github.com/saltybeagle"><img class="center" src="/assets/images/github/saltybeagle.png" width="687" height="299" title="Contributions by saltybeagle" alt="Contributions by saltybeagle"></a>
<a href="https://github.com/Hounddog"><img class="center" src="/assets/images/github/Hounddog.png" width="687" height="299" title="Contributions by Hounddog" alt="Contributions by Hounddog"></a>
<a href="https://github.com/ceeram"><img class="center" src="/assets/images/github/ceeram.png" width="687" height="299" title="Contributions by ceeram" alt="Contributions by ceeram"></a>
<a href="https://github.com/jmikola"><img class="center" src="/assets/images/github/jmikola.png" width="687" height="299" title="Contributions by jmikola" alt="Contributions by jmikola"></a>
<a href="https://github.com/cweiske"><img class="center" src="/assets/images/github/cweiske.png" width="687" height="299" title="Contributions by cweiske" alt="Contributions by cweiske"></a>
<a href="https://github.com/rdohms"><img class="center" src="/assets/images/github/rdohms.png" width="687" height="299" title="Contributions by rdohms" alt="Contributions by rdohms"></a></p>

<p>and I too did some contributions in 2012 for <a href="https://github.com/auraphp">auraphp</a> and other projects.</p>

<p><a href="https://github.com/harikt"><img class="center" src="/assets/images/github/harikt.png" width="687" height="299" title="Contributions by harikt" alt="Contributions by harikt"></a></p>

<p>The list is not complete, if you feel I missed your name or someone you feel needs to be added just give a tweet to me or fork the repo from github and send a PR.</p>
</div>
  
  


      </article>
    
    
      <article>
        
  <header>
          
      <h2><a href="/blog/2013/01/04/thoughts-on-package-or-component/">Thoughts on Package/Component Structure</a></h2>
    
    
      <span>
        








  


<time datetime="2013-01-04T06:15:00+05:30" pubdate data-updated="true">Jan 4<span>th</span>, 2013</time>
        
      </span>
    
  </header>


  <div class="entry-content"><p>Comparing a software X with Y will not make anything worst, but makes it better. But many of them will think it as a promotional stuff. It is not anyones&rsquo;s problem. Some like to build it that way, some like the other way.</p>

<p>So I am not comparing X with Y here.</p>

<p>Not talking about package like Guzzle:</p>

<p>I am not mentioning building something like Guzzle, which is a framework that includes the tools needed to create a robust web service client.</p>

<p>But I am interested in talking about the packages which can be used to build something like Guzzle when you look into the require of composer.json.</p>

<p>That means something like Aura.Http which can be used to make a request to google and do the search if needed or post etc.</p>

<p>Structure of Package or Component:</p>

<p>1 ) We need to name a package.</p>

<p>Let us go for the <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md">PSR-0</a> naming.</p>

<p>Each namespace must have a top-level namespace (&ldquo;Vendor Name&rdquo;), and a Package name. Probably you will end up with Vendor.Package or Vendor_Package .</p>

<p>2 ) <a href="http://getcomposer.org/">Composer</a>/<a href="https://github.com/crodas/Eath">Eath</a>, are great tools which help you to manage the dependency management in your PHP projects. So we need a composer.json or package.yml .</p>

<p>3 ) We are creating a package or component, so obviously it will contain source files and test files. It will be a mess when we keep all tests and source files in a same place. Most of them uses either <code>src</code> folder or <code>lib</code> or <code>library</code> to keep source files and <code>tests</code> to keep test files. Probably you have some documentation, a <code>docs</code> folder may help. May be some executable scripts. You can also add a <code>scripts</code> or <code>bin</code> folder.</p>

<p>Now your structure will be something like</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Vendor.Package
</span><span class='line'>   composer.json
</span><span class='line'>   package.yml
</span><span class='line'>   docs
</span><span class='line'>   src
</span><span class='line'>    Vendor
</span><span class='line'>        Package
</span><span class='line'>   tests
</span><span class='line'>       Vendor
</span><span class='line'>           Package
</span></code></pre></td></tr></table></div></figure>


<p>The above structure follows a PSR-0 naming convention for package/component.</p>

<p>NIH : We all create new packages for we don&rsquo;t like some other package invented here, not for its not invented here or probably to make use of newer stuffs like traits, closures etc available in PHP 5.4 than sticking with PHP 5 or sometimes it is not inveneted here.</p>

<p>So add your depenedencies to composer.json or package.yml</p>

<p>Let us assume we are going to create a Validation pacakge. Probably you love annotations or yml format. It is always a better idea to keep the annotations, yaml etc on a bridge than in the Validation package. Remember you have composer, let the bridge package composer.json helps you to download validation package, annotation library. This also helps you to write your integration tests in bridge package than making a dependency on the Validation package.</p>

<p>And also help people to use different annotations library than a single one or you will end up messing with more annotation classes.</p>

<p>I guess this helps people to</p>

<p>1 ) fork and contribute</p>

<p>2 ) Even if there is no documentation, it helps to look into the source and get the point. Else a lot of classes confuses people.</p>

<p>Nothing is developed to make it bad, everything is made for good. Though at-times it acts badly.</p>

<p>These are some of the principles I learned looking at various projects like Aura, Symfony2, ZF2, Lithium, Fuel2, Illuminate&hellip; you name it.</p>
</div>
  
  


      </article>
    
    
      <article>
        
  <header>
          
      <h2><a href="/blog/2012/12/18/aura-framework-releases-beta4/">Aura Framework Releases Beta4</a></h2>
    
    
      <span>
        








  


<time datetime="2012-12-18T23:25:00+05:30" pubdate data-updated="true">Dec 18<span>th</span>, 2012</time>
        
      </span>
    
  </header>


  <div class="entry-content"><p>Aura.Framework released Beta4. In this release <a href="http://auraphp.github.com/Aura.Framework">Aura.Framework</a> has extracted the Hello Word package and renamed it as <a href="http://auraphp.github.com/Aura.Demo">Aura.Demo</a>.</p>

<p>You can get the system as a whole from <a href="http://auraphp.github.com/system/downloads/">http://auraphp.github.com/system/downloads/</a></p>

<p>Read about the release from <a href="http://auraphp.github.com/2012/12/18/new-system-release/">blog post</a> and join discussion at <a href="https://groups.google.com/d/topic/auraphp/uPsSK7OqOoI/discussion">auraphp group</a></p>
</div>
  
  


      </article>
    
    
      <article>
        
  <header>
          
      <h2><a href="/blog/2012/12/17/the-moving-from-drupal7-to-octopress/">The Moving From Drupal7 to Octopress</a></h2>
    
    
      <span>
        








  


<time datetime="2012-12-17T23:23:00+05:30" pubdate data-updated="true">Dec 17<span>th</span>, 2012</time>
        
      </span>
    
  </header>


  <div class="entry-content"><p>Recently I ported the blog from <a href="http://drupal.org">Drupal7</a> to <a href="http://octopress.org/">octopress</a> for certain reasons. The php script that helped me to do the porting from drupal to octopress is given below. This is a port of the ruby script with some additional fixes on the SQL. This needs <a href="http://johnmacfarlane.net/pandoc/">pandoc</a> to be installed to convert from Html to Markdown. There is also slight isssue with the syntaxhighlighter, which you may want to manually fix.</p>

<figure class='code'><figcaption><span>drupal7 to octopress</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="k">function</span> <span class="nf">drupalProcess</span><span class="p">(</span><span class="nv">$dbname</span><span class="p">,</span> <span class="nv">$username</span><span class="p">,</span> <span class="nv">$password</span><span class="p">,</span> <span class="nv">$host</span> <span class="o">=</span> <span class="s1">&#39;localhost&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$dsn</span> <span class="o">=</span> <span class="s2">&quot;mysql:host=</span><span class="si">$host</span><span class="s2">;dbname=&quot;</span> <span class="o">.</span> <span class="nv">$dbname</span><span class="p">;</span>
</span><span class='line'>    <span class="nv">$pdo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Pdo</span><span class="p">(</span><span class="nv">$dsn</span><span class="p">,</span> <span class="nv">$username</span><span class="p">,</span> <span class="nv">$password</span><span class="p">,</span> <span class="nv">$options</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>          <span class="nx">PDO</span><span class="o">::</span><span class="na">MYSQL_ATTR_INIT_COMMAND</span> <span class="o">=&gt;</span> <span class="s1">&#39;SET NAMES utf8&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="p">)</span>
</span><span class='line'>    <span class="p">);</span>
</span><span class='line'>    <span class="nv">$sql</span> <span class="o">=</span> <span class="s2">&quot;SELECT n.nid, </span>
</span><span class='line'><span class="s2">            n.title, </span>
</span><span class='line'><span class="s2">            n.created, </span>
</span><span class='line'><span class="s2">            n.changed, </span>
</span><span class='line'><span class="s2">            b.body_value AS &#39;body&#39;, </span>
</span><span class='line'><span class="s2">            b.body_summary, </span>
</span><span class='line'><span class="s2">            b.body_format, </span>
</span><span class='line'><span class="s2">            n.status, </span>
</span><span class='line'><span class="s2">            l.alias AS &#39;slug&#39;, </span>
</span><span class='line'><span class="s2">            GROUP_CONCAT( d.name SEPARATOR &#39;, &#39; ) AS &#39;tags&#39; </span>
</span><span class='line'><span class="s2">        FROM node AS n </span>
</span><span class='line'><span class="s2">        JOIN field_data_body b ON b.entity_id = n.nid </span>
</span><span class='line'><span class="s2">        JOIN taxonomy_index t ON t.nid = n.nid </span>
</span><span class='line'><span class="s2">        JOIN taxonomy_term_data d ON t.tid = d.tid </span>
</span><span class='line'><span class="s2">        LEFT JOIN url_alias AS l ON l.source = CONCAT( &#39;node/&#39;, n.nid ) </span>
</span><span class='line'><span class="s2">        WHERE n.type = &#39;blog&#39; AND b.revision_id = n.vid </span>
</span><span class='line'><span class="s2">        GROUP BY n.nid&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="nv">$sth</span> <span class="o">=</span> <span class="nv">$pdo</span><span class="o">-&gt;</span><span class="na">prepare</span><span class="p">(</span><span class="nv">$sql</span><span class="p">);</span>
</span><span class='line'>    <span class="nv">$sth</span><span class="o">-&gt;</span><span class="na">execute</span><span class="p">();</span>
</span><span class='line'>    <span class="nv">$rows</span> <span class="o">=</span> <span class="nv">$sth</span><span class="o">-&gt;</span><span class="na">fetchAll</span><span class="p">();</span>
</span><span class='line'>    <span class="nv">$bool</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span><span class="mi">0</span> <span class="o">=&gt;</span> <span class="s1">&#39;false&#39;</span><span class="p">,</span> <span class="mi">1</span> <span class="o">=&gt;</span> <span class="s1">&#39;true&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$rows</span> <span class="k">as</span> <span class="nv">$row</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="nv">$fp</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="s1">&#39;htmlcontents.html&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="nb">fwrite</span><span class="p">(</span><span class="nv">$fp</span><span class="p">,</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;body&#39;</span><span class="p">]);</span>
</span><span class='line'>        <span class="nb">fclose</span><span class="p">(</span><span class="nv">$fp</span><span class="p">);</span>
</span><span class='line'>        <span class="nv">$datetime</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">DateTime</span><span class="p">();</span>
</span><span class='line'>        <span class="nv">$datetime</span><span class="o">-&gt;</span><span class="na">setTimestamp</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;created&#39;</span><span class="p">]);</span>
</span><span class='line'>        <span class="nv">$date</span> <span class="o">=</span> <span class="nv">$datetime</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">&#39;Y-m-d&#39;</span><span class="p">);</span>
</span><span class='line'>        <span class="nv">$contents</span> <span class="o">=</span> <span class="s1">&#39;---&#39;</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="nv">$contents</span> <span class="o">.=</span> <span class="s1">&#39;layout: post&#39;</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="nv">$contents</span> <span class="o">.=</span> <span class="s1">&#39;title: &#39;</span> <span class="o">.</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="nv">$contents</span> <span class="o">.=</span> <span class="s1">&#39;categories: [&#39;</span> <span class="o">.</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;tags&#39;</span><span class="p">]</span> <span class="o">.</span> <span class="s1">&#39;]&#39;</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="nv">$contents</span> <span class="o">.=</span> <span class="s1">&#39;published: &#39;</span> <span class="o">.</span> <span class="nv">$bool</span><span class="p">[</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">]]</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="nv">$contents</span> <span class="o">.=</span> <span class="s1">&#39;date: &#39;</span> <span class="o">.</span> <span class="nv">$datetime</span><span class="o">-&gt;</span><span class="na">format</span><span class="p">(</span><span class="s1">&#39;Y-m-d H:i&#39;</span><span class="p">)</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="nv">$contents</span> <span class="o">.=</span> <span class="s1">&#39;---&#39;</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">empty</span><span class="p">(</span><span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;slug&#39;</span><span class="p">]))</span> <span class="p">{</span>
</span><span class='line'>            <span class="nv">$list</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;slug&#39;</span><span class="p">]);</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$list</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>                <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;slug&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">end</span><span class="p">(</span><span class="nv">$list</span><span class="p">);</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>            <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;slug&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;node-&#39;</span> <span class="o">.</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;nid&#39;</span><span class="p">];</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="nv">$pandoc</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>        <span class="nb">exec</span><span class="p">(</span><span class="s1">&#39;pandoc -t markdown -f html htmlcontents.html&#39;</span><span class="p">,</span> <span class="o">&amp;</span><span class="nv">$pandoc</span><span class="p">);</span>
</span><span class='line'>        <span class="nv">$contents</span> <span class="o">.=</span> <span class="nb">implode</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="nv">$pandoc</span><span class="p">);</span>
</span><span class='line'>        <span class="nv">$url</span> <span class="o">=</span> <span class="s1">&#39;source/posts/&#39;</span> <span class="o">.</span> <span class="nv">$date</span> <span class="o">.</span> <span class="s1">&#39;-&#39;</span> <span class="o">.</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;slug&#39;</span><span class="p">]</span> <span class="o">.</span> <span class="s1">&#39;.markdown&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="nv">$contents</span> <span class="o">.=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$url</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>            <span class="nv">$fp</span> <span class="o">=</span> <span class="nb">fopen</span><span class="p">(</span><span class="nv">$url</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">);</span>
</span><span class='line'>            <span class="nb">fwrite</span><span class="p">(</span><span class="nv">$fp</span><span class="p">,</span> <span class="nv">$contents</span><span class="p">);</span>
</span><span class='line'>            <span class="nb">fclose</span><span class="p">(</span><span class="nv">$fp</span><span class="p">);</span>
</span><span class='line'>        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>            <span class="k">echo</span> <span class="s2">&quot;File exists issue : &quot;</span> <span class="o">.</span> <span class="nv">$row</span><span class="p">[</span><span class="s1">&#39;slug&#39;</span><span class="p">]</span> <span class="o">.</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="c1">//optional hostname</span>
</span><span class='line'><span class="nx">drupalProcess</span><span class="p">(</span><span class="s1">&#39;dbname&#39;</span><span class="p">,</span> <span class="s1">&#39;username&#39;</span><span class="p">,</span> <span class="s1">&#39;password&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Happy porting!</p>
</div>
  
  


      </article>
    
    
      <article>
        
  <header>
          
      <h2><a href="/blog/2012/12/17/resize-image-keeping-aspect-ratio-in-imagine/">Resize Image Keeping Aspect Ratio in Imagine</a></h2>
    
    
      <span>
        








  


<time datetime="2012-12-17T22:24:00+05:30" pubdate data-updated="true">Dec 17<span>th</span>, 2012</time>
        
      </span>
    
  </header>


  <div class="entry-content"><p>I was working with Imagine recently. I want to create a standard width and height for the image that is created. Eg: 500 X 300 .</p>

<p>The user will be uploading different size images and I want to resize the image to X width and Y height. I was using imagine and the code helps to make this happen filling the blank space with white color without loosing aspect ratio.</p>

<figure class='code'><figcaption><span>resize image with imagine</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="nv">$source</span> <span class="o">=</span> <span class="s1">&#39;image.jpeg&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$destination</span> <span class="o">=</span> <span class="s1">&#39;resize.jpg&#39;</span><span class="p">;</span>
</span><span class='line'><span class="nv">$width</span>  <span class="o">=</span> <span class="mi">300</span><span class="p">;</span>
</span><span class='line'><span class="nv">$height</span> <span class="o">=</span> <span class="mi">500</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$imagine</span>   <span class="o">=</span> <span class="k">new</span> <span class="nx">Imagine\Gd\Imagine</span><span class="p">();</span>
</span><span class='line'><span class="nv">$size</span>      <span class="o">=</span> <span class="k">new</span> <span class="nx">Imagine\Image\Box</span><span class="p">(</span><span class="nv">$width</span><span class="p">,</span> <span class="nv">$height</span><span class="p">);</span>
</span><span class='line'><span class="nv">$mode</span>      <span class="o">=</span> <span class="nx">Imagine\Image\ImageInterface</span><span class="o">::</span><span class="na">THUMBNAIL_INSET</span><span class="p">;</span>
</span><span class='line'><span class="nv">$resizeimg</span> <span class="o">=</span> <span class="nv">$imagine</span><span class="o">-&gt;</span><span class="na">open</span><span class="p">(</span><span class="nv">$source</span><span class="p">)</span>
</span><span class='line'>                <span class="o">-&gt;</span><span class="na">thumbnail</span><span class="p">(</span><span class="nv">$size</span><span class="p">,</span> <span class="nv">$mode</span><span class="p">);</span>
</span><span class='line'><span class="nv">$sizeR</span>     <span class="o">=</span> <span class="nv">$resizeimg</span><span class="o">-&gt;</span><span class="na">getSize</span><span class="p">();</span>
</span><span class='line'><span class="nv">$widthR</span>    <span class="o">=</span> <span class="nv">$sizeR</span><span class="o">-&gt;</span><span class="na">getWidth</span><span class="p">();</span>
</span><span class='line'><span class="nv">$heightR</span>   <span class="o">=</span> <span class="nv">$sizeR</span><span class="o">-&gt;</span><span class="na">getHeight</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$preserve</span>  <span class="o">=</span> <span class="nv">$imagine</span><span class="o">-&gt;</span><span class="na">create</span><span class="p">(</span><span class="nv">$size</span><span class="p">);</span>
</span><span class='line'><span class="nv">$startX</span> <span class="o">=</span> <span class="nv">$startY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span> <span class="nv">$widthR</span> <span class="o">&lt;</span> <span class="nv">$width</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$startX</span> <span class="o">=</span> <span class="p">(</span> <span class="nv">$width</span> <span class="o">-</span> <span class="nv">$widthR</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span> <span class="nv">$heightR</span> <span class="o">&lt;</span> <span class="nv">$height</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$startY</span> <span class="o">=</span> <span class="p">(</span> <span class="nv">$height</span> <span class="o">-</span> <span class="nv">$heightR</span> <span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nv">$preserve</span><span class="o">-&gt;</span><span class="na">paste</span><span class="p">(</span><span class="nv">$resizeimg</span><span class="p">,</span> <span class="k">new</span> <span class="nx">Imagine\Image\Point</span><span class="p">(</span><span class="nv">$startX</span><span class="p">,</span> <span class="nv">$startY</span><span class="p">))</span>
</span><span class='line'>    <span class="o">-&gt;</span><span class="na">save</span><span class="p">(</span><span class="nv">$destination</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>A normal image of size 500 X 500</p>

<p><img class="center" src="/assets/images/kitten.jpg" width="500" height="500" title="A cute kitten" alt="a kitten"></p>

<p>when resized to 300 X 200</p>

<p><img class="center" src="/assets/images/resize-image300x200.jpg" width="300" height="200" title="Image resized to 300X200" alt="resized image"></p>

<p>and 300 X 400</p>

<p><img class="center" src="/assets/images/resize-image300x400.jpg" width="300" height="400" title="Image resized to 300X400" alt="resized image"></p>

<p>A huge Thanks to the person who helped me on Symfony2 irc to find the different modes. I am not recalling the irc handle currently. I will update once I remember the same.</p>

<p>Image courtsey <a href="http://placekitten.com/">http://placekitten.com/</a></p>
</div>
  
  


      </article>
    
    
      <article>
        
  <header>
          
      <h2><a href="/blog/2012/12/16/status-code-304/">Status Code 304</a></h2>
    
    
      <span>
        








  


<time datetime="2012-12-16T23:03:00+05:30" pubdate data-updated="true">Dec 16<span>th</span>, 2012</time>
        
      </span>
    
  </header>


  <div class="entry-content"><p>Everyone knows Http is the underlying concept of Web. The base concept is a request is initiated by a browser or web-client and you get a response back. Some day&rsquo;s back I noticed some interesting slides from Alessandro Nadalin&rsquo;s talk <a href="http://odino.org/mixing-the-history-of-http-spdy-and-http-slash-2-dot-0/">Mixing the history of HTTP, SPDY and HTTP/2.0</a></p>

<p>It really inspired me to look more into the Http. I also understood a fact that I was missing many basic stuffs. I thought of playing with it.</p>

<p>Note : This is just experimental stuffs which I tried to learn looking at various sources. Things can be wrong also, feel free to correct if you think so.</p>

<p>Normally you don&rsquo;t care about the underlying http headers. There are status codes which are passed before an actual content is send. So the browser knows the state whether the content is available in server, what content-type is coming, for eg like html, json, xml etc. The content-length, accept-language, etc. You can see a list of http request and response headers at <a href="http://en.wikipedia.org/wiki/List_of_HTTP_header_fields.">http://en.wikipedia.org/wiki/List_of_HTTP_header_fields.</a></p>

<p>So we are going to create the headers other than the normal apache header. By default the status is 200 OK.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">header</span><span class="p">(</span><span class="s1">&#39;Content-Type: text/html&#39;</span><span class="p">);</span>
</span><span class='line'><span class="k">echo</span> <span class="s1">&#39;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Hello World&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>If you notice the broswer headers you can see something like</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">Request</span> <span class="nx">URL</span><span class="o">:</span><span class="nx">http</span><span class="o">://</span><span class="nx">localhost</span><span class="o">:</span><span class="mi">8000</span><span class="o">/</span>
</span><span class='line'><span class="nx">Request</span> <span class="nx">Method</span><span class="o">:</span><span class="nx">GET</span>
</span><span class='line'><span class="nx">Status</span> <span class="nx">Code</span><span class="o">:</span><span class="mi">200</span> <span class="nx">OK</span>
</span><span class='line'>
</span><span class='line'><span class="nx">Request</span> <span class="nx">Headers</span>
</span><span class='line'>
</span><span class='line'><span class="nx">Accept</span><span class="o">:</span><span class="nx">text</span><span class="o">/</span><span class="nx">html</span><span class="p">,</span><span class="nx">application</span><span class="o">/</span><span class="nx">xhtml</span><span class="o">+</span><span class="nx">xml</span><span class="p">,</span><span class="nx">application</span><span class="o">/</span><span class="nx">xml</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span><span class="o">*/*</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.8</span>
</span><span class='line'><span class="nx">Accept</span><span class="o">-</span><span class="nx">Charset</span><span class="o">:</span><span class="nx">ISO</span><span class="o">-</span><span class="mi">8859</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="nx">utf</span><span class="o">-</span><span class="mi">8</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span><span class="o">*</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.3</span>
</span><span class='line'><span class="nx">Accept</span><span class="o">-</span><span class="nx">Encoding</span><span class="o">:</span><span class="nx">gzip</span><span class="p">,</span><span class="nx">deflate</span><span class="p">,</span><span class="nx">sdch</span>
</span><span class='line'><span class="nx">Accept</span><span class="o">-</span><span class="nx">Language</span><span class="o">:</span><span class="nx">en</span><span class="o">-</span><span class="nx">US</span><span class="p">,</span><span class="nx">en</span><span class="p">;</span><span class="nx">q</span><span class="o">=</span><span class="mf">0.8</span>
</span><span class='line'><span class="nx">Cache</span><span class="o">-</span><span class="nx">Control</span><span class="o">:</span><span class="nx">max</span><span class="o">-</span><span class="nx">age</span><span class="o">=</span><span class="mi">0</span>
</span><span class='line'><span class="nx">Connection</span><span class="o">:</span><span class="nx">keep</span><span class="o">-</span><span class="nx">alive</span>
</span><span class='line'><span class="nx">Host</span><span class="o">:</span><span class="nx">localhost</span><span class="o">:</span><span class="mi">8000</span>
</span><span class='line'><span class="nx">User</span><span class="o">-</span><span class="nx">Agent</span><span class="o">:</span><span class="nx">Mozilla</span><span class="o">/</span><span class="mf">5.0</span> <span class="p">(</span><span class="nx">X11</span><span class="p">;</span> <span class="nx">Linux</span> <span class="nx">i686</span><span class="p">)</span> <span class="nx">AppleWebKit</span><span class="o">/</span><span class="mf">535.19</span> <span class="p">(</span><span class="nx">KHTML</span><span class="p">,</span> <span class="nx">like</span> <span class="nx">Gecko</span><span class="p">)</span> <span class="nx">Ubuntu</span><span class="o">/</span><span class="mf">11.10</span> <span class="nx">Chromium</span><span class="o">/</span><span class="mf">18.0</span><span class="o">.</span><span class="mf">1025.168</span> <span class="nx">Chrome</span><span class="o">/</span><span class="mf">18.0</span><span class="o">.</span><span class="mf">1025.168</span> <span class="nx">Safari</span><span class="o">/</span><span class="mf">535.19</span>
</span><span class='line'>
</span><span class='line'><span class="nx">Response</span> <span class="nx">Headers</span>
</span><span class='line'>
</span><span class='line'><span class="nx">HTTP</span><span class="o">/</span><span class="mf">1.1</span> <span class="mi">200</span> <span class="nx">OK</span>
</span><span class='line'><span class="nx">Host</span><span class="o">:</span> <span class="nx">localhost</span><span class="o">:</span><span class="mi">8000</span>
</span><span class='line'><span class="nx">Connection</span><span class="o">:</span> <span class="nx">close</span>
</span><span class='line'><span class="nx">X</span><span class="o">-</span><span class="nx">Powered</span><span class="o">-</span><span class="nx">By</span><span class="o">:</span> <span class="nx">PHP</span><span class="o">/</span><span class="mf">5.4</span><span class="o">.</span><span class="mi">4</span><span class="o">-</span><span class="mi">1</span><span class="o">~</span><span class="nx">oneiric</span><span class="o">+</span><span class="mi">1</span>
</span><span class='line'><span class="nx">Content</span><span class="o">-</span><span class="nx">Type</span><span class="o">:</span> <span class="nx">text</span><span class="o">/</span><span class="nx">html</span>
</span><span class='line'><span class="nx">Last</span><span class="o">-</span><span class="nx">Modified</span><span class="o">:</span> <span class="nx">Tue</span><span class="p">,</span> <span class="mi">15</span> <span class="nx">Jan</span> <span class="mi">2011</span> <span class="mi">12</span><span class="o">:</span><span class="mo">00</span>
</span></code></pre></td></tr></table></div></figure>


<p>and the respose source as</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;</span>Hello World<span class="nt">&lt;/body&gt;&lt;/html&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Http Caching:</p>

<p>So you may not have seen any benefict in the above for its what you normally get. Now lets enter to the world of http caching.</p>

<p>You may have heard about Expires, Cache-Control, Last-Modified, Etag headers. Yes with the help of these we can make use of http caching. Let&rsquo;s see a base example.</p>

<p>What will happen when you request the same url? It reloads the page. So the base concept is same, the client requests to server and server responds. But the scenario changes, if the browser is asking with some additional headers like If-Modified-Since or If-None-Match.</p>

<p>If the response from server has set Last-Modified header value, then the request initiated by broswer will be having If-Modified-Since header.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nx">header</span><span class="p">(</span><span class="s1">&#39;Content-Type: text/html&#39;</span><span class="p">);</span>
</span><span class='line'><span class="nx">header</span><span class="p">(</span><span class="s1">&#39;Last-Modified: Tue, 15 Jan 2011 12:00 GMT&#39;</span><span class="p">);</span>
</span><span class='line'><span class="k">echo</span> <span class="s1">&#39;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Hello World&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Now if you look into the Request Headers, you can notice the If-Modified-Since is send.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
</span><span class='line'>Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
</span><span class='line'>Accept-Encoding:gzip,deflate,sdch
</span><span class='line'>Accept-Language:en-US,en;q=0.8
</span><span class='line'>Cache-Control:max-age=0
</span><span class='line'>Connection:keep-alive
</span><span class='line'>Host:localhost:8000
</span><span class='line'>If-Modified-Since:Tue, 15 Jan 2011 12:00
</span><span class='line'>User-Agent:Mozilla/5.0 (X11; Linux i686) AppleWebKit/535.19 (KHTML, like Gecko) Ubuntu/11.10 Chromium/18.0.1025.168 Chrome/18.0.1025.168 Safari/535.19
</span></code></pre></td></tr></table></div></figure>


<p>But we weren&rsquo;t validating the data to make use of caching. What we need to do is check whether the server variable HTTP_IF_MODIFIED_SINCE is set. If its set, we need to validate whether its being modified. If both are same we just need to send a 304 status code which means not modified with out any content. I am hard coding for demonstration purpose.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_IF_MODIFIED_SINCE&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span>
</span><span class='line'>    <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_IF_MODIFIED_SINCE&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tue, 15 Jan 2011 12:00 GMT&#39;</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">http_response_code</span><span class="p">(</span><span class="mi">304</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">header</span><span class="p">(</span><span class="s1">&#39;Content-Type: text/html&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">header</span><span class="p">(</span><span class="s1">&#39;Last-Modified: Tue, 15 Jan 2011 12:00 GMT&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="k">echo</span> <span class="s1">&#39;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Hello World&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>So in this case if you reload the page, it will send a 304 not modified header. Getting the 304 header browser knows its not modified. This is too fast and we save a huge band width and server processing. Isn&rsquo;t it too good? I recall his slides 21 years of http which still not used very nicely :&ndash;/</p>

<p>Let&rsquo;s move on to E-tag. As you have noticed the problem with Last-Modified and Expires is it uses GMT time. If the server and the client are not sync, then its hard. Thus the E-tag is introduced. You can create a md5 hash and set the E-tag header.</p>

<p>If you are setting a E-tag, then you can use the server variable HTTP_IF_NONE_MATCH to validate it and send a status of 304.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">if</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_IF_MODIFIED_SINCE&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span>
</span><span class='line'>    <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_IF_MODIFIED_SINCE&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;Tue, 15 Jan 2011 12:00 GMT&#39;</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">http_response_code</span><span class="p">(</span><span class="mi">304</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span> <span class="k">elseif</span> <span class="p">(</span> <span class="nb">isset</span><span class="p">(</span><span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_IF_NONE_MATCH&#39;</span><span class="p">])</span> <span class="o">&amp;&amp;</span>
</span><span class='line'>    <span class="nv">$_SERVER</span><span class="p">[</span><span class="s1">&#39;HTTP_IF_NONE_MATCH&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="nb">md5</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">http_response_code</span><span class="p">(</span><span class="mi">304</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>    <span class="nx">header</span><span class="p">(</span><span class="s1">&#39;Content-Type: text/html&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">header</span><span class="p">(</span><span class="s1">&#39;Last-Modified: Tue, 15 Jan 2011 12:00 GMT&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nx">header</span><span class="p">(</span><span class="s1">&#39;ETag: &#39;</span> <span class="o">.</span> <span class="nb">md5</span><span class="p">(</span><span class="s1">&#39;Hello&#39;</span><span class="p">));</span>
</span><span class='line'>    <span class="k">echo</span> <span class="s1">&#39;&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;Hello World&lt;/body&gt;&lt;/html&gt;&#39;</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Note : In the above examples I have hard coded the time and md5 hash. But in the real world you should use file modified time or something like that depending on the use case.</p>

<p>References :</p>

<p>Status Code : <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html">http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html</a></p>

<p><a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol</a></p>

<p>Response : <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html">http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html</a></p>

<p>Caching in Http : <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html">http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html</a></p>

<p><a href="http://en.wikipedia.org/wiki/List_of_HTTP_header_fields">http://en.wikipedia.org/wiki/List_of_HTTP_header_fields</a></p>

<p><a href="http://en.wikipedia.org/wiki/HTTP_ETag">http://en.wikipedia.org/wiki/HTTP_ETag</a></p>

<p><a href="http://stackoverflow.com/questions/691318/what-headers-do-i-want-to-send-together-with-a-304-response">http://stackoverflow.com/questions/691318/what-headers-do-i-want-to-send-together-with-a-304-response</a></p>

<p><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19">http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19</a></p>

<p><a href="http://tomayko.com/writings/things-caches-do">http://tomayko.com/writings/things-caches-do</a></p>

<p><a href="http://www.peej.co.uk/articles/http-caching.html">http://www.peej.co.uk/articles/http-caching.html</a></p>

<p><a href="http://www.mnot.net/cache_docs/">http://www.mnot.net/cache_docs/</a></p>

<p><a href="https://developers.google.com/storage/docs/reference-headers#cachecontrol">https://developers.google.com/storage/docs/reference-headers#cachecontrol</a></p>

<p><a href="https://developers.google.com/speed/docs/best-practices/caching#LeverageBrowserCaching">https://developers.google.com/speed/docs/best-practices/caching#LeverageBrowserCaching</a></p>
</div>
  
  


      </article>
    
    
      <article>
        
  <header>
          
      <h2><a href="/blog/2012/12/06/node-227/">Aura.Sql Can Now Make Use of Existing PDO Connection</a></h2>
    
    
      <span>
        








  


<time datetime="2012-12-06T19:27:00+05:30" pubdate data-updated="true">Dec 6<span>th</span>, 2012</time>
        
      </span>
    
  </header>


  <div class="entry-content"><p>Aura.Sql can now make use of an existing PDO connection with the recent <a href="https://github.com/auraphp/Aura.Sql/commit/79284382ef6351d81719376063076c7e511c28fd">commit here</a>. This all came after a short discussion with Stan Lemon. A big Thanks to him for making a featured request like this.    > @<a href="https://twitter.com/harikt">harikt</a> can I inject an existing Pdo > object? > >  Stan Lemon (@stanlemon) > <a href="https://twitter.com/stanlemon/status/274708971217100800">December 1, 2012</a>    How to make use of an existing PDO?  You want to get a connection object and set the instance of pdo. Note : In this way you are eager loading the PDO. Else Aura.Sql knows when to do the connection. Example of how to make use of it is</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="k">use</span> <span class="nx">Aura\Sql\ConnectionFactory</span><span class="p">;</span>
</span><span class='line'><span class="nv">$connection_factory</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ConnectionFactory</span><span class="p">;</span>
</span><span class='line'><span class="nv">$connection</span> <span class="o">=</span> <span class="nv">$connection_factory</span><span class="o">-&gt;</span><span class="na">newInstance</span><span class="p">(</span>
</span><span class='line'>    <span class="c1">// connection name </span>
</span><span class='line'>    <span class="s1">&#39;mysql&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="c1">// DSN elements for PDO; this can also be </span>
</span><span class='line'>    <span class="c1">// an array of key-value pairs </span>
</span><span class='line'>    <span class="c1">// host=127.0.0.1;dbname=database-name </span>
</span><span class='line'>    <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="c1">// username for the connection </span>
</span><span class='line'>    <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="c1">// password for the connection </span>
</span><span class='line'>    <span class="s1">&#39;&#39;</span>
</span><span class='line'><span class="p">);</span>
</span><span class='line'><span class="nv">$connection</span><span class="o">-&gt;</span><span class="na">setPdo</span><span class="p">(</span><span class="nv">$pdo</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Normally you need to pass the dsn as a string or array. But if you are having the PDO object and you don&rsquo;t love to do, you can pass it as null. Then to the connection object set the pdo instance. Now you can make use of the Aura.Sql insert ,update , delete queries. For a detailed information of how to do check the docs at <a href="https://github.com/auraphp/Aura.Sql">Aura.Sql</a> .  Assuming you have a PDO object created something like the one below</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$params</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
</span><span class='line'>    <span class="s1">&#39;driver&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;pdo_mysql&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;user&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;username&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;password&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;password&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s1">&#39;dbname&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;database-name&#39;</span>
</span><span class='line'><span class="p">);</span>
</span><span class='line'><span class="nv">$dsn</span> <span class="o">=</span> <span class="s1">&#39;mysql:host=localhost;dbname=&#39;</span> <span class="o">.</span> <span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;dbname&#39;</span><span class="p">];</span>
</span><span class='line'><span class="nv">$pdo</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Pdo</span><span class="p">(</span>
</span><span class='line'>    <span class="nv">$dsn</span><span class="p">,</span>
</span><span class='line'>    <span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;user&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="nv">$params</span><span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">],</span>
</span><span class='line'>    <span class="nv">$options</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span> <span class="nx">PDO</span><span class="o">::</span><span class="na">MYSQL_ATTR_INIT_COMMAND</span> <span class="o">=&gt;</span> <span class="s1">&#39;SET NAMES utf8&#39;</span><span class="p">,</span> <span class="p">)</span>
</span><span class='line'><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


      </article>
    
    <div class="pagination">
      
        <a class="prev" href="/blog/page/5/">&larr; Older</a>
      
      <a href="/blog/archives">Blog Archives</a>
      
      <a class="next" href="/blog/page/3/">Newer &rarr;</a>
      
    </div>
  </div>
  <div class="4u">
    <!-- Sidebar -->
    <section id="sidebar">
    
      <section>
	<a href="/who-am-i/" class="image full">
    <img src="https://1.gravatar.com/avatar/895c943fbd5beb697f6c2d7bf0c3b279?s=300" />
  </a>
  <header>
    <h3>About Hari</h3>
  </header>
	<p>      
      I am <a href="/who-am-i/">Hari KT</a> a freelance PHP developer from India.        
      Breath open-source and contributes to <a href="http://auraphp.com">aura project</a>.
	</p>
  <ul class="actions">
    <li><a class="button" href="/who-am-i/">Know more</a></li>
  </ul>
</section>
<section>
  <h2>Recent Posts</h2>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/05/29/hidden-gems-of-composer/">Hidden Gems of Composer</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/13/extending-plates-with-aura-html-helpers/">Extending Plates With Aura Html Helpers</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/29/installing-aura-framework-project-via-composer/">Installing Aura Framework Project via Composer</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/29/installing-aura-cli-project-via-composer/">Installing Aura Cli Project via Composer</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/29/installing-aura-web-project-via-composer/">Installing Aura Web Project via Composer</a>
      </li>
    
  </ul>
</section>

<section>
  <header>
    <h3>GitHub Repos</h3>
  </header>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/harikt">@harikt</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'harikt',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/js/github.js" type="text/javascript"> </script>
</section>





    
    </section>
  </div>
</div>

    </div>
  </div>
  <!-- Footer Wrapper -->
  <div id="footer-wrapper">
    <!-- Footer -->
<div id="footer" class="container">
  <header class="major">
    <h2>Socialized</h2>
    <span>I also live at other places in the internet. Some of them are given below</span>
  </header>
  <div class="row">
    <section class="6u">
      <div class="row no-collapse-1">
        <ul class="divided icons 6u">          
          <li class="fa fa-github"><a href="https://github.com/harikt"><span class="extra">github.com/</span>harikt</a></li>
          <li class="fa fa-twitter"><a href="http://twitter.com/harikt"><span class="extra">twitter.com/</span>harikt</a></li>          
        </ul>
        <ul class="divided icons 6u">
          <li class="fa fa-linkedin"><a href="http://linkedin.com/in/harikt"><span class="extra">linkedin.com/in/</span>harikt</a></li>          
        </ul>
      </div>
    </section>
    <section class="6u">
      <div class="row no-collapse-1">
        <ul class="divided icons 6u">          
          <li class="fa fa-facebook"><a href="https://facebook.com/harikt"><span class="extra">facebook.com/</span>harikt</a></li>
        </ul>
        <ul class="divided icons 6u">          
          <li class="fa fa-youtube"><a href="http://www.youtube.com/user/kthari85"><span class="extra">youtube.com/</span>kthari85</a></li>          
        </ul>
      </div>
    </section>
  </div>
</div>

<!-- Copyright -->
<div id="copyright" class="container">
  <ul class="menu">
    <li>&copy; 2014 - Hari K T</li>
    <li>Design: <a href="http://html5up.net/">HTML5 UP</a></li>
    <li>Powered by <a href="http://octopress.org">Octopress</a></li>
  </ul>
</div>


  </div>
  

<script type="text/javascript">
      var disqus_shortname = 'harikt';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
